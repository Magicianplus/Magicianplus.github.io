---
layout: post
title: "第9章 使用库函数点亮第一个LED"
category: STM32
---

<center><font face = "楷体" size = 6 color = orange>第9章 使用库函数点亮第一个LED</font></center>

### 一、硬件设计
[![pAsPfl6.png](https://s21.ax1x.com/2024/11/04/pAsPfl6.png)](https://imgse.com/i/pAsPfl6)
1. 两个指示灯DS0和DS1，分别接在PB5和PE5
2. 发光二极管的阳极连接一个限流电阻，连接到3.3V，阴极连接到一个GPIO，输出低电平，这个时候发光二极管导通发光，要让他熄灭，就给它一个高电平，阴极和阳极的电平一样，所以它会熄灭

### 二、软件设计
1. 程序主要框架：
- ① 初始化系统时钟（固件库已经封装好，自己完成调用）
- ② 使能对应GPIO时钟，并初始化GPIO相关参数
- ③ 点亮LED

2. 所使用的库文件介绍
- ① GPIO外设库文件：stm32f10x_gpio.c、stm32f10x_gpio.h
- ② RCC（外设时钟）外设库文件：stm32f10x_rcc.c、stm32f10x_rcc.h

3. 所使用的库函数介绍
GPIO挂载在APB2高速总线上

① 使能GPIO时钟函数：
```
void RCC_APB2PeriphClockCmd(uint32_t RCC_APB2Periph, FunctionalState NewState)
Periph：外设，Clock：时钟，Cmd：使能
两个参数，参数1：ABPB2上的外设选择，参数2：功能状态（打开还是关闭）
```
② GPIO初始化函数：
```
void GPIO_Init(GPIO_TypeDef* GPIOx,GPIO_InitTypeDef* GPIO_InitStruct)
参数1：选择端口，GPIOA，GPIOB...
参数2：结构体，通过结构体调用成员
```
③ 设置管脚输出电平函数：
**设置位功能函数，输出高电平**
```
void GPIO_SetBits(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin)
参数1：选择端口，GPIOA，GPIOB...
参数2：选择你要操作的引脚
```
**复位引脚，输出低电平**
```
void GPIO_ResetBits(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin)
参数1：选择端口，GPIOA，GPIOB...
参数2：选择你要操作的引脚
```
**对位（GPIO引脚）进行写**
```
void GPIO_WriteBit(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin, BitAction BitVal)
参数1：选择端口，GPIOA，GPIOB...
参数2：选择你要操作的引脚，对该引脚进行写，
参数3：写1还是0
```
**GPIO写，一个端口组进行写
一个端口组有16个管脚，所以传值是对应一组端口**
```
void GPIO_Write(GPIO_TypeDef* GPIOx, uint16_t PortVal)
参数1：选择端口，GPIOA，GPIOB...
参数2：输入你要操作的引脚，如0x01，就是对0号引脚进行操作
```
④ 读取管脚输入电平函数：
**读取一个位（引脚）**
```
uint8_t GPIO_ReadInputDataBit(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin)
参数1：选择端口，GPIOA，GPIOB...
参数2：选择你要操作的引脚
```
GPIO读，一个端口组进行读
```
uint16_t GPIO_ReadInputData(GPIO_TypeDef* GPIOx)
参数1：选择端口，GPIOA，GPIOB...
```
⑤ 读取管脚输出电平函数：
```
uint8_t GPIO_ReadOutputDataBit(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin)
uint16_t GPIO_ReadOutputData(GPIO_TypeDef* GPIOx)
```
